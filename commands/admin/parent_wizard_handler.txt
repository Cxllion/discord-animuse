            else if (action === 'protocol_setup_wizard') {
                // Setup Wizard Confirmation
                const confirmEmbed = new EmbedBuilder()
                    .setTitle('üìö Library Setup Wizard')
                    .setDescription('This will create all essential server roles with one click.')
                    .setColor('#F39C12')
                    .addFields(
                        {
                            name: 'üîí Moderation Roles (4)',
                            value: '> **Head Librarian** - Owners\n> **Senior Librarian** - Admins\n> **Librarian** - Moder ators\n> **Library Council** - Special Council',
                            inline: false
                        },
                        {
                            name: 'üíé Premium Role (1)',
                            value: '> **Premium** - Premium members',
                            inline: false
                        },
                        {
                            name: 'üìä Total',
                            value: '**5 roles** will be created',
                            inline: false
                        }
                    )
                    .setFooter({ text: 'All roles will be created with appropriate permissions and colors' });

                const confirmRow = new ActionRowBuilder().addComponents(
                    new ButtonBuilder()
                        .setCustomId('wizard_proceed')
                        .setLabel('Proceed')
                        .setStyle(ButtonStyle.Success)
                        .setEmoji('‚úÖ'),
                    new ButtonBuilder()
                        .setCustomId('wizard_cancel')
                        .setLabel('Cancel')
                        .setStyle(ButtonStyle.Secondary)
                        .setEmoji('‚ùå')
                );

                await i.reply({ embeds: [confirmEmbed], components: [confirmRow], flags: MessageFlags.Ephemeral });
                const confirmResponse = await i.fetchReply();

                const confirmCollector = confirmResponse.createMessageComponentCollector({ time: 60000 });

                confirmCollector.on('collect', async wizardI => {
                    if (wizardI.customId === 'wizard_cancel') {
                        await wizardI.update({ content: '‚ùå Setup wizard cancelled.', embeds: [], components: [] });
                        return;
                    }

                    if (wizardI.customId === 'wizard_proceed') {
                        await wizardI.deferUpdate();

                        try {
                            // Run setup wizard
                            await wizardI.editReply({ content: '‚öôÔ∏è Creating roles... Please wait...', embeds: [], components: [] });
                            
                            const createdRoles = await setupEssentialRoles(i.guild);
                            
                            // Success message
                            const completionEmbed = new EmbedBuilder()
                                .setTitle('‚úÖ Setup Complete!')
                                .setDescription('All essential server roles have been created.')
                                .setColor('#2ECC71')
                                .addFields(
                                    {
                                        name: 'üîí Moderation Roles',
                                        value: createdRoles.moderation.map(r => `‚úÖ \u003c@\u0026${r.id}\u003e`).join('\n'),
                                        inline: false
                                    },
                                    {
                                        name: 'üíé Premium Role',
                                        value: `‚úÖ \u003c@\u0026${createdRoles.premium.id}\u003e`,
                                        inline: false
                                    },
                                    {
                                        name: 'üìö Next Steps',
                                        value: '‚Ä¢ Assign moderation roles to staff\n‚Ä¢ Use Organize Role Hierarchy to position roles\n‚Ä¢ Configure permissions as needed',
                                        inline: false
                                    }
                                )
                                .setFooter({ text: `Created ${createdRoles.moderation.length + 1} roles ‚Ä¢ AniMuse Setup Wizard` });

                            await wizardI.editReply({ content: null, embeds: [completionEmbed], components: [] });

                        } catch (error) {
                            const logger = require('../../utils/core/logger');
                            logger.error('Setup wizard failed:', error, 'SetupWizard');
                            await wizardI.editReply({ content: `‚ùå **Setup failed**: ${error.message}`, embeds: [], components: [] });
                        }
                    }
                });
            }
